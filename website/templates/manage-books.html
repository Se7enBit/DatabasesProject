{% extends "base.html" %}{% block title %}School Admin Page{% endblock %}{%
block navbar %} {% if role == 'school_admin'%}
<li class="nav-item">
  <a
    class="nav-link"
    id="queries"
    href="/queries"
  >
    Advanced Tools
  </a>
</li>
<li class="nav-item">
  <a
    class="nav-link"
    id="manage-books"
    href="/manage-books"
  >
    Manage books
  </a>
</li>
{% endif %} {% endblock %}{% block content %}
<form
  method="POST"
  action="/manage-books"
>
  <h3 align="center">Insert Book</h3>
  <div class="form-group">
    <label for="title">Title</label>
    <input
      type="text"
      class="form-control"
      id="title"
      name="title"
      placeholder="Enter title"
    />
  </div>
  <div class="form-group">
    <label for="writer_input">Writer(s)</label>
    <input
      type="text"
      class="form-control"
      id="writer_input"
      name="writer_input"
      placeholder="Enter writer(s)"
    />
  </div>
  <div class="form-group">
    <label for="lang">Language</label>
    <select
      class="form-control"
      id="lang"
      name="lang"
    >
      <option value="Greek">Greek</option>
      <option value="English">English</option>
      <option value="French">French</option>
      <option value="German">German</option>
    </select>
  </div>
  <div class="form-group">
    <label for="publisher">Publisher</label>
    <input
      type="text"
      class="form-control"
      id="publisher"
      name="publisher"
      placeholder="Enter publisher"
    />
  </div>
  <div class="form-group">
    <label for="isbn">ISBN</label>
    <input
      type="number"
      class="form-control"
      id="isbn"
      name="isbn"
      placeholder="Enter ISBN"
    />
  </div>
  <div class="form-group">
    <label for="number_of_pages">Number of pages</label>
    <input
      type="number"
      class="form-control"
      id="number_of_pages"
      name="number_of_pages"
      placeholder="Enter Number of pages"
    />
  </div>
  <div class="form-group">
    <label for="categories">Categories</label>
    <input
      type="text"
      class="form-control"
      id="categories"
      name="categories"
      placeholder="Enter categories separated with comma (,)"
    />
  </div>
  <br />
  <div class="form-group">
    <label for="abstract">Abstract</label>
    <input
      type="text"
      class="form-control"
      id="abstract"
      name="abstract"
      placeholder="Enter abstract"
    />
  </div>
  <div class="form-group">
    <label for="keywords">Keywords</label>
    <input
      type="text"
      class="form-control"
      id="keywords"
      name="keywords"
      placeholder="Enter keywords separated with comma (,)"
    />
  </div>
  <div class="form-group">
    <label for="image">Image</label>
    <input
      type="text"
      class="form-control"
      id="image"
      name="image"
      placeholder="Upload Image"
    />
  </div>
  <div
    class="form-group"
    style="background-color: white; border-color: white"
  >
    <button
      type="submit"
      class="btn btn-primary"
      name="insert-book"
    >
      Insert
    </button>
  </div>
</form>

<h3 align="center">Books in My School</h3>
<ul>
  {% for info in infos %}
  <li class="product">
    <div style="margin-right: 7px">
      <img
        src="{{image_url[loop.index0]}}"
        alt="{{ info[0] }}"
        width="50"
      />
    </div>
    <div>
      <h4><a href="/books/{{info[3]}}">{{ info[0] }}</a></h4>
      <p>Number of Copies: {{ info[1] }}</p>
      <form
        action="/manage-books"
        method="post"
      >
        <button
          name="add-book-copy"
          id="add-book-copy"
          class="btn btn-primary btn-success"
        >
          +
        </button>
        <button
          name="remove-book-copy"
          id="remove-book-copy"
          class="btn btn-primary btn-danger"
        >
          -
        </button>
        <input
          type="hidden"
          name="book_id"
          value="{{info[3]}}"
        />
      </form>
    </div>
  </li>

  {% endfor %}
</ul>

<h3 align="center">Other books in Database</h3>

<ul>
  {% for book in new_books %}
  <li class="product">
    <div style="margin-right: 7px">
      <img
        src="{{new_book_image_url[loop.index0]}}"
        alt="{{ book[0] }}"
        width="50"
      />
    </div>
    <div>
      <h4><a href="/books/{{book[1]}}">{{ book[0] }}</a></h4>
      <p>Number of Copies: 0</p>
      <form
        action="/manage-books"
        method="post"
      >
        <button
          name="add-new-book"
          id="add-new-book"
          class="btn btn-primary btn-success"
        >
          +
        </button>
        <input
          type="hidden"
          name="new_book_id"
          value="{{book[1]}}"
        />
      </form>
    </div>
  </li>

  {% endfor %}
</ul>
<script>
  document.getElementById("title").addEventListener("input", function () {
    var value = parseInt(this.value);
    if (isNaN(value) || value == "") {
      this.setCustomValidity("Please fill in the title field.");
    } else {
      this.setCustomValidity("");
    }
  });
</script>
<script>
  document.getElementById("writer_full").addEventListener("input", function () {
    var value = parseInt(this.value);
    if (isNaN(value) || value == "") {
      this.setCustomValidity("Please fill in the writer(s) field.");
    } else {
      this.setCustomValidity("");
    }
  });
</script>
<script>
  document.getElementById("publisher").addEventListener("input", function () {
    var value = parseInt(this.value);
    if (isNaN(value) || value == "") {
      this.setCustomValidity("Please fill in the publisher field.");
    } else {
      this.setCustomValidity("");
    }
  });
</script>
<script>
  document.getElementById("isbn").addEventListener("input", function () {
    var value = parseInt(this.value);
    if (isNaN(value) || value == "" || value <= 0) {
      this.setCustomValidity("Please fill in the isbn field.");
    } else {
      this.setCustomValidity("");
    }
  });
</script>
<script>
  document.getElementById("abstract").addEventListener("input", function () {
    var value = parseInt(this.value);
    if (isNaN(value) || value == "") {
      this.setCustomValidity("Please fill in the abstract field.");
    } else {
      this.setCustomValidity("");
    }
  });
</script>
<script>
  document.getElementById("keywords").addEventListener("input", function () {
    var value = parseInt(this.value);
    if (isNaN(value) || value == "") {
      this.setCustomValidity("Please fill in the keywords field.");
    } else {
      this.setCustomValidity("");
    }
  });
</script>
<script>
  document
    .getElementById("number_of_pages")
    .addEventListener("input", function () {
      var value = parseInt(this.value);
      if (isNaN(value) || value == "" || value <= 0) {
        this.setCustomValidity("Please fill in the number of pages field.");
      } else {
        this.setCustomValidity("");
      }
    });
</script>
<script>
  document.getElementById("categories").addEventListener("input", function () {
    var value = parseInt(this.value);
    if (isNaN(value) || value == "") {
      this.setCustomValidity("Please fill in the categories field.");
    } else {
      this.setCustomValidity("");
    }
  });
</script>

{% endblock %}
